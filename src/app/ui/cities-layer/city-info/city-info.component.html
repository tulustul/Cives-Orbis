<div
  class="info"
  (click)="selectCity()"
  (click)="controls.onClick($event)"
  (mousedown)="controls.onMouseDown($event)"
  (mouseup)="controls.onMouseUp($event)"
  (mousemove)="controls.onMouseMove($event)"
  (wheel)="controls.onWheel($event)"
  (contextmenu)="onContextMenu($event)"
>
  <div class="size">{{ city().size }}</div>
  <div *ngIf="areDetailsVisible; else simpleViewTmpl">
    <app-progress-bar
      class="growth"
      [progress]="city().totalFood"
      [nextProgress]="city().totalFood + city().foodPerTurn"
      [total]="city().foodToGrow"
    >
      <span>{{ city().name }}</span>
      <span class="turns">({{ city().turnsToGrow | turns }})</span>
    </app-progress-bar>

    <app-progress-bar
      class="production"
      [progress]="city().totalProduction"
      [nextProgress]="city().totalProduction + city().productionPerTurn"
      [total]="city().productionRequired || 0"
    >
      <span>
        {{ city().productName }}
      </span>
      <span class="turns">({{ city().turnsToProductionEnd | turns }})</span>
    </app-progress-bar>
  </div>
</div>

<ng-template #simpleViewTmpl>
  <div class="simple-view">{{ city().name }}</div>
</ng-template>
